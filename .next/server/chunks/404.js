exports.id=404,exports.ids=[404],exports.modules={3470:(e,t,s)=>{Promise.resolve().then(s.bind(s,160))},229:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},160:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(326),a=s(7577),o=s.n(a),n=s(9974),l=s(434),i=s(5047),c=s(748),d=s(5920),u=s(6283),h=s(1821),m=s(763),x=s(8378),f=s(1810),b=s(9635);function g(){let{isAuthenticated:e,userProfile:t,login:s,logout:g,isLoading:y}=o().useContext(n.I),{isStackReady:j,stackError:p}=Object(function(){var e=Error("Cannot find module './StackAuthIsolation'");throw e.code="MODULE_NOT_FOUND",e}())(),v=(0,i.usePathname)(),[w,N]=(0,a.useState)(!1);return y||!j?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"hidden md:flex items-center space-x-6",children:r.jsx("div",{className:"text-gray-500",children:"Loading navigation..."})}),r.jsx("div",{className:"md:hidden",children:r.jsx(c.Z,{size:24,className:"text-gray-400 animate-pulse"})})]}):p?(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-6 text-red-600",children:["Authentication Error: ",p]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-6",children:[(0,r.jsxs)(l.default,{href:"/",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/"===v?"text-blue-600 font-semibold":""}`,children:[r.jsx(d.Z,{size:20,className:"mr-1"})," Dashboard"]}),e&&t?.role==="member"&&(0,r.jsxs)(l.default,{href:"/my-requests",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/my-requests"===v?"text-blue-600 font-semibold":""}`,children:[r.jsx(u.Z,{size:20,className:"mr-1"})," My Requests"]}),e&&t?.role==="provider"&&(0,r.jsxs)(l.default,{href:"/my-quotes",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/my-quotes"===v?"text-blue-600 font-semibold":""}`,children:[r.jsx(h.Z,{size:20,className:"mr-1"})," My Quotes"]}),e&&t?.role==="admin"&&(0,r.jsxs)(l.default,{href:"/admin",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/admin"===v?"text-blue-600 font-semibold":""}`,children:[r.jsx(m.Z,{size:20,className:"mr-1"})," Admin"]}),e&&(0,r.jsxs)(l.default,{href:"/settings",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/settings"===v?"text-blue-600 font-semibold":""}`,children:[r.jsx(x.Z,{size:20,className:"mr-1"})," Settings"]}),e?(0,r.jsxs)("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 flex items-center",children:[r.jsx(f.Z,{size:20,className:"mr-1"})," Logout"]}):(0,r.jsxs)("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[r.jsx(b.Z,{size:20,className:"mr-1"})," Login"]})]}),r.jsx("div",{className:"md:hidden",children:r.jsx("button",{onClick:()=>N(!w),className:"text-gray-700 hover:text-blue-600",children:r.jsx(c.Z,{size:24})})}),w&&(0,r.jsxs)("div",{className:"absolute top-16 left-0 right-0 bg-white shadow-lg p-4 md:hidden z-30",children:[r.jsx(l.default,{href:"/",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"Dashboard"}),e&&t?.role==="member"&&r.jsx(l.default,{href:"/my-requests",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"My Requests"}),e&&t?.role==="provider"&&r.jsx(l.default,{href:"/my-quotes",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"My Quotes"}),e&&t?.role==="admin"&&r.jsx(l.default,{href:"/admin",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"Admin"}),e&&r.jsx(l.default,{href:"/settings",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"Settings"}),e?r.jsx("button",{onClick:()=>{g(),N(!1)},className:"w-full text-left py-2 bg-red-600 text-white rounded-md hover:bg-red-700 mt-2",children:"Logout"}):r.jsx("button",{onClick:()=>{s(),N(!1)},className:"w-full text-left py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mt-2",children:"Login"})]})]})}function y({children:e}){return(0,r.jsxs)("html",{lang:"en",children:[(0,r.jsxs)("head",{children:[r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),r.jsx("title",{children:"Mphakathi Online"})]}),r.jsx("body",{children:r.jsx(Object(function(){var e=Error("Cannot find module './components/StackAuthIsolation'");throw e.code="MODULE_NOT_FOUND",e}()),{children:r.jsx(Object(function(){var e=Error("Cannot find module './components/StackAuthIsolation'");throw e.code="MODULE_NOT_FOUND",e}()),{children:r.jsx(n.w,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col",children:[(0,r.jsxs)("nav",{className:"bg-white shadow-md p-4 flex justify-between items-center sticky top-0 z-40",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Mphakathi Online"})}),r.jsx(g,{})]}),r.jsx("main",{className:"flex-grow p-4 md:p-8",children:e})]})})})})})]})}(function(){var e=Error("Cannot find module './StackAuthIsolation'");throw e.code="MODULE_NOT_FOUND",e})(),s(9752),function(){var e=Error("Cannot find module './components/StackAuthIsolation'");throw e.code="MODULE_NOT_FOUND",e}()},9974:(e,t,s)=>{"use strict";s.d(t,{I:()=>n,w:()=>i});var r=s(326),a=s(7577),o=s(7473);!function(){var e=Error("Cannot find module '../app/components/StackAuthIsolation'");throw e.code="MODULE_NOT_FOUND",e}();let n=(0,a.createContext)(null),l="http://localhost:8888",i=({children:e})=>{let{isStackReady:t,stackError:s}=Object(function(){var e=Error("Cannot find module '../app/components/StackAuthIsolation'");throw e.code="MODULE_NOT_FOUND",e}())(),i=!1,c=null,d=!0,u=()=>console.warn("Stack Auth login not available (context not ready)."),h=()=>console.warn("Stack Auth logout not available (context not ready).");if(t&&!s)try{let{isAuthenticated:e,user:t,isLoading:s}=(0,o.a)(),r=(0,o.I)();i=e,c=t,d=s,u=r.login,h=r.logout}catch(e){console.warn("Error accessing Stack Auth context in AppProvider (might be a transient issue):",e)}let[m,x]=(0,a.useState)(null),[f,b]=(0,a.useState)([]),[g,y]=(0,a.useState)([]),[j,p]=(0,a.useState)(null),[v,w]=(0,a.useState)(!0),[N,k]=(0,a.useState)([]),[O,C]=(0,a.useState)([]),E=(0,a.useCallback)(async()=>{try{let e=await fetch(`${l}/.netlify/functions/get-branding`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json();x(t)}catch(e){console.error("Failed to fetch branding:",e)}},[]),T=(0,a.useCallback)(async()=>{try{let e=await fetch(`${l}/.netlify/functions/get-pricing-plans`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json();b(t)}catch(e){console.error("Failed to fetch pricing plans:",e)}},[]),S=(0,a.useCallback)(async()=>{try{let e=await fetch(`${l}/.netlify/functions/get-problems`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json();y(t)}catch(e){console.error("Failed to fetch public problems:",e)}},[]),$=(0,a.useCallback)(async()=>{if(!i||!c?.id){p(null);return}try{let e=await c.getIdToken(),t=await fetch(`${l}/.netlify/functions/get-or-create-user-profile`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({auth_id:c.id,email:c.email,name:c.name||(c.email?c.email.split("@")[0]:"User")})});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let s=await t.json();p(s)}catch(e){console.error("Failed to fetch or create user profile:",e),p(null)}},[i,c]),P=(0,a.useCallback)(async()=>{if(!i||!j?.id){k([]);return}try{let e=await c.getIdToken(),t=await fetch(`${l}/.netlify/functions/get-my-requests?userId=${j.id}`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let s=await t.json();k(s)}catch(e){console.error("Failed to fetch my requests:",e),k([])}},[i,j?.id,c]),A=(0,a.useCallback)(async()=>{if(!i||!j?.id||j?.role!=="provider"){C([]);return}try{let e=await c.getIdToken(),t=await fetch(`${l}/.netlify/functions/get-my-quotes?providerId=${j.id}`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let s=await t.json();C(s)}catch(e){console.error("Failed to fetch my quotes:",e),C([])}},[i,j?.id,j?.role,c]);(0,a.useEffect)(()=>{(async()=>{w(!0),await Promise.all([E(),T(),S()]),w(!1)})()},[E,T,S]),(0,a.useEffect)(()=>{i&&t?$():(p(null),k([]),C([]))},[i,$,t]),(0,a.useEffect)(()=>{j?.id&&i&&t&&(P(),A())},[j?.id,i,P,A,t]);let D={branding:m,pricingPlans:f,publicProblems:g,userProfile:j,myRequests:N,myQuotes:O,fetchMyRequests:P,fetchPublicProblems:S,fetchMyQuotes:A,isAuthenticated:i,user:c,isLoading:d||v||!t,login:u,logout:h};return r.jsx(n.Provider,{value:D,children:e})}},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/home/runner/workspace/app/layout.tsx#default`)},9752:()=>{}};