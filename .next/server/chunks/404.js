exports.id=404,exports.ids=[404],exports.modules={3470:(e,t,s)=>{Promise.resolve().then(s.bind(s,1174))},229:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},4607:(e,t,s)=>{"use strict";s.d(t,{B:()=>n,b:()=>i});var r=s(326),a=s(7577);let l=(0,a.createContext)({isStackReady:!1,stackError:null});function i({children:e}){let[t,s]=(0,a.useState)(!1),[i,n]=(0,a.useState)(null);return r.jsx(l.Provider,{value:{isStackReady:t,stackError:i},children:e})}function n(){return(0,a.useContext)(l)}},1174:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(326),a=s(7577),l=s(9974),i=s(434),n=s(5047),o=s(748),c=s(5920),d=s(6283),u=s(1821),h=s(763),m=s(8378),x=s(1810),f=s(9635),b=s(4607);function g(){let{isAuthenticated:e,userProfile:t,login:s,logout:g,isLoading:y}=(0,l.b)(),{isStackReady:j,stackError:p}=(0,b.B)(),v=(0,n.usePathname)(),[w,N]=(0,a.useState)(!1);return y||!j?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"hidden md:flex items-center space-x-6",children:r.jsx("div",{className:"text-gray-500",children:"Loading navigation..."})}),r.jsx("div",{className:"md:hidden",children:r.jsx(o.Z,{size:24,className:"text-gray-400 animate-pulse"})})]}):p?(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-6 text-red-600",children:["Authentication Error: ",p]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-6",children:[(0,r.jsxs)(i.default,{href:"/",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/"===v?"text-blue-600 font-semibold":""}`,children:[r.jsx(c.Z,{size:20,className:"mr-1"})," Dashboard"]}),e&&t?.role==="member"&&(0,r.jsxs)(i.default,{href:"/my-requests",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/my-requests"===v?"text-blue-600 font-semibold":""}`,children:[r.jsx(d.Z,{size:20,className:"mr-1"})," My Requests"]}),e&&t?.role==="provider"&&(0,r.jsxs)(i.default,{href:"/my-quotes",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/my-quotes"===v?"text-blue-600 font-semibold":""}`,children:[r.jsx(u.Z,{size:20,className:"mr-1"})," My Quotes"]}),e&&t?.role==="admin"&&(0,r.jsxs)(i.default,{href:"/admin",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/admin"===v?"text-blue-600 font-semibold":""}`,children:[r.jsx(h.Z,{size:20,className:"mr-1"})," Admin"]}),e&&(0,r.jsxs)(i.default,{href:"/settings",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/settings"===v?"text-blue-600 font-semibold":""}`,children:[r.jsx(m.Z,{size:20,className:"mr-1"})," Settings"]}),e?(0,r.jsxs)("button",{onClick:g,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 flex items-center",children:[r.jsx(x.Z,{size:20,className:"mr-1"})," Logout"]}):(0,r.jsxs)("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[r.jsx(f.Z,{size:20,className:"mr-1"})," Login"]})]}),r.jsx("div",{className:"md:hidden",children:r.jsx("button",{onClick:()=>N(!w),className:"text-gray-700 hover:text-blue-600",children:r.jsx(o.Z,{size:24})})}),w&&(0,r.jsxs)("div",{className:"absolute top-16 left-0 right-0 bg-white shadow-lg p-4 md:hidden z-30",children:[r.jsx(i.default,{href:"/",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"Dashboard"}),e&&t?.role==="member"&&r.jsx(i.default,{href:"/my-requests",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"My Requests"}),e&&t?.role==="provider"&&r.jsx(i.default,{href:"/my-quotes",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"My Quotes"}),e&&t?.role==="admin"&&r.jsx(i.default,{href:"/admin",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"Admin"}),e&&r.jsx(i.default,{href:"/settings",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"Settings"}),e?r.jsx("button",{onClick:()=>{g(),N(!1)},className:"w-full text-left py-2 bg-red-600 text-white rounded-md hover:bg-red-700 mt-2",children:"Logout"}):r.jsx("button",{onClick:()=>{s(),N(!1)},className:"w-full text-left py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mt-2",children:"Login"})]})]})}function y({children:e}){let{isStackReady:t,stackError:s}=(0,b.B)();return s?(console.warn("Stack Auth Error:",s),(0,r.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded",children:[r.jsx("h2",{className:"text-red-800 font-semibold",children:"Authentication Error"}),r.jsx("p",{className:"text-red-600 text-sm",children:s}),r.jsx("p",{className:"text-red-600 text-sm mt-2",children:"Please refresh the page or contact support if this persists."})]})):r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Initializing authentication..."})]})})}function j({children:e}){return(0,r.jsxs)("html",{lang:"en",children:[(0,r.jsxs)("head",{children:[r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),r.jsx("title",{children:"Mphakathi Online"})]}),r.jsx("body",{children:r.jsx(b.b,{children:r.jsx(y,{children:r.jsx(l.w,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col",children:[(0,r.jsxs)("nav",{className:"bg-white shadow-md p-4 flex justify-between items-center sticky top-0 z-40",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Mphakathi Online"})}),r.jsx(g,{})]}),r.jsx("main",{className:"flex-grow p-4 md:p-8",children:e})]})})})})})]})}s(999),s(9262),s(9752)},9974:(e,t,s)=>{"use strict";s.d(t,{b:()=>d,w:()=>c});var r=s(326),a=s(7577),l=s(2029),i=s(4607);let n=(0,a.createContext)(void 0),o="http://localhost:8888";function c({children:e}){let{isStackReady:t,stackError:s}=(0,i.B)(),{isAuthenticated:c,user:d,isLoading:u}=(0,l.a)(),h=(0,l.I)(),[m,x]=(0,a.useState)(null),[f,b]=(0,a.useState)([]),[g,y]=(0,a.useState)([]),[j,p]=(0,a.useState)(null),[v,w]=(0,a.useState)(!0),[N,k]=(0,a.useState)([]),[C,$]=(0,a.useState)([]),P=(0,a.useCallback)(()=>{h?.login?h.login():console.warn("Stack Auth login not available.")},[h]),S=(0,a.useCallback)(()=>{h?.logout?h.logout():console.warn("Stack Auth logout not available.")},[h]);(0,a.useCallback)(async()=>{try{let e=await fetch(`${o}/.netlify/functions/get-branding`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json();x(t)}catch(e){console.error("Failed to fetch branding:",e)}},[]),(0,a.useCallback)(async()=>{try{let e=await fetch(`${o}/.netlify/functions/get-pricing-plans`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json();b(t)}catch(e){console.error("Failed to fetch pricing plans:",e)}},[]);let T=(0,a.useCallback)(async()=>{try{let e=await fetch(`${o}/.netlify/functions/get-problems`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json();y(t)}catch(e){console.error("Failed to fetch public problems:",e)}},[]);(0,a.useCallback)(async()=>{if(!t||s||!c||!d?.id){p(null);return}try{let e=await d.getIdToken(),t=await fetch(`${o}/.netlify/functions/get-or-create-user-profile`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({auth_id:d.id,email:d.email,name:d.name||(d.email?d.email.split("@")[0]:"User")})});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let s=await t.json();p(s)}catch(e){console.error("Failed to fetch or create user profile:",e),p(null)}},[c,d,t,s]);let z=(0,a.useCallback)(async()=>{if(!t||s||!c||!j?.id){k([]);return}try{let e=await d.getIdToken(),t=await fetch(`${o}/.netlify/functions/get-my-requests?userId=${j.id}`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let s=await t.json();k(s)}catch(e){console.error("Failed to fetch my requests:",e),k([])}},[c,j?.id,d,t,s]),q=(0,a.useCallback)(async()=>{if(!t||s||!c||!j?.id||j?.role!=="provider"){$([]);return}try{let e=await d.getIdToken(),t=await fetch(`${o}/.netlify/functions/get-my-quotes?providerId=${j.id}`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let s=await t.json();$(s)}catch(e){console.error("Failed to fetch my quotes:",e),$([])}},[c,j?.id,j?.role,d,t,s]);return r.jsx(n.Provider,{value:{branding:m,pricingPlans:f,publicProblems:g,userProfile:j,myRequests:N,myQuotes:C,fetchMyRequests:z,fetchPublicProblems:T,fetchMyQuotes:q,isAuthenticated:c,user:d,isLoading:u||v||!t,error:s,login:P,logout:S},children:e})}function d(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAppContext must be used within an AppProvider");return e}},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/home/runner/workspace/app/layout.tsx#default`)},9752:()=>{}};