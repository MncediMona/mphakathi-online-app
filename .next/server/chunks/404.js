exports.id=404,exports.ids=[404],exports.modules={3470:(e,t,s)=>{Promise.resolve().then(s.bind(s,160))},229:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},4607:(e,t,s)=>{"use strict";s.d(t,{B:()=>n,b:()=>i});var r=s(326),a=s(7577);let l=(0,a.createContext)({isStackReady:!1,stackError:null});function i({children:e}){let[t,s]=(0,a.useState)(!1),[i,n]=(0,a.useState)(null);return r.jsx(l.Provider,{value:{isStackReady:t,stackError:i},children:e})}function n(){return(0,a.useContext)(l)}},160:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(326),a=s(7577),l=s.n(a),i=s(9974),n=s(434),o=s(5047),c=s(748),d=s(5920),u=s(6283),h=s(1821),m=s(763),x=s(8378),f=s(1810),b=s(9635),g=s(4607);function y(){let{isAuthenticated:e,userProfile:t,login:s,logout:y,isLoading:j}=l().useContext(i.I),{isStackReady:p,stackError:v}=(0,g.B)(),w=(0,o.usePathname)(),[k,N]=(0,a.useState)(!1);return j||!p?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"hidden md:flex items-center space-x-6",children:r.jsx("div",{className:"text-gray-500",children:"Loading navigation..."})}),r.jsx("div",{className:"md:hidden",children:r.jsx(c.Z,{size:24,className:"text-gray-400 animate-pulse"})})]}):v?(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-6 text-red-600",children:["Authentication Error: ",v]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-6",children:[(0,r.jsxs)(n.default,{href:"/",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/"===w?"text-blue-600 font-semibold":""}`,children:[r.jsx(d.Z,{size:20,className:"mr-1"})," Dashboard"]}),e&&t?.role==="member"&&(0,r.jsxs)(n.default,{href:"/my-requests",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/my-requests"===w?"text-blue-600 font-semibold":""}`,children:[r.jsx(u.Z,{size:20,className:"mr-1"})," My Requests"]}),e&&t?.role==="provider"&&(0,r.jsxs)(n.default,{href:"/my-quotes",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/my-quotes"===w?"text-blue-600 font-semibold":""}`,children:[r.jsx(h.Z,{size:20,className:"mr-1"})," My Quotes"]}),e&&t?.role==="admin"&&(0,r.jsxs)(n.default,{href:"/admin",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/admin"===w?"text-blue-600 font-semibold":""}`,children:[r.jsx(m.Z,{size:20,className:"mr-1"})," Admin"]}),e&&(0,r.jsxs)(n.default,{href:"/settings",className:`text-gray-700 hover:text-blue-600 flex items-center ${"/settings"===w?"text-blue-600 font-semibold":""}`,children:[r.jsx(x.Z,{size:20,className:"mr-1"})," Settings"]}),e?(0,r.jsxs)("button",{onClick:y,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 flex items-center",children:[r.jsx(f.Z,{size:20,className:"mr-1"})," Logout"]}):(0,r.jsxs)("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[r.jsx(b.Z,{size:20,className:"mr-1"})," Login"]})]}),r.jsx("div",{className:"md:hidden",children:r.jsx("button",{onClick:()=>N(!k),className:"text-gray-700 hover:text-blue-600",children:r.jsx(c.Z,{size:24})})}),k&&(0,r.jsxs)("div",{className:"absolute top-16 left-0 right-0 bg-white shadow-lg p-4 md:hidden z-30",children:[r.jsx(n.default,{href:"/",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"Dashboard"}),e&&t?.role==="member"&&r.jsx(n.default,{href:"/my-requests",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"My Requests"}),e&&t?.role==="provider"&&r.jsx(n.default,{href:"/my-quotes",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"My Quotes"}),e&&t?.role==="admin"&&r.jsx(n.default,{href:"/admin",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"Admin"}),e&&r.jsx(n.default,{href:"/settings",className:"block py-2 text-gray-700 hover:text-blue-600",onClick:()=>N(!1),children:"Settings"}),e?r.jsx("button",{onClick:()=>{y(),N(!1)},className:"w-full text-left py-2 bg-red-600 text-white rounded-md hover:bg-red-700 mt-2",children:"Logout"}):r.jsx("button",{onClick:()=>{s(),N(!1)},className:"w-full text-left py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mt-2",children:"Login"})]})]})}function j({children:e}){return(0,r.jsxs)("html",{lang:"en",children:[(0,r.jsxs)("head",{children:[r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),r.jsx("title",{children:"Mphakathi Online"})]}),r.jsx("body",{children:r.jsx(g.b,{children:r.jsx(g.SafeStackProvider,{children:r.jsx(i.w,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col",children:[(0,r.jsxs)("nav",{className:"bg-white shadow-md p-4 flex justify-between items-center sticky top-0 z-40",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Mphakathi Online"})}),r.jsx(y,{})]}),r.jsx("main",{className:"flex-grow p-4 md:p-8",children:e})]})})})})})]})}s(9752)},9974:(e,t,s)=>{"use strict";s.d(t,{I:()=>n,w:()=>c});var r=s(326),a=s(7577),l=s(7473),i=s(4607);let n=(0,a.createContext)(null),o="http://localhost:8888",c=({children:e})=>{let{isStackReady:t,stackError:s}=(0,i.B)(),c=!1,d=null,u=!0,h=()=>console.warn("Stack Auth login not available (context not ready)."),m=()=>console.warn("Stack Auth logout not available (context not ready).");if(t&&!s)try{let{isAuthenticated:e,user:t,isLoading:s}=(0,l.a)(),r=(0,l.I)();c=e,d=t,u=s,h=r.login,m=r.logout}catch(e){console.warn("Error accessing Stack Auth context in AppProvider (might be a transient issue):",e)}let[x,f]=(0,a.useState)(null),[b,g]=(0,a.useState)([]),[y,j]=(0,a.useState)([]),[p,v]=(0,a.useState)(null),[w,k]=(0,a.useState)(!0),[N,$]=(0,a.useState)([]),[C,P]=(0,a.useState)([]),S=(0,a.useCallback)(async()=>{try{let e=await fetch(`${o}/.netlify/functions/get-branding`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json();f(t)}catch(e){console.error("Failed to fetch branding:",e)}},[]),T=(0,a.useCallback)(async()=>{try{let e=await fetch(`${o}/.netlify/functions/get-pricing-plans`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json();g(t)}catch(e){console.error("Failed to fetch pricing plans:",e)}},[]),z=(0,a.useCallback)(async()=>{try{let e=await fetch(`${o}/.netlify/functions/get-problems`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json();j(t)}catch(e){console.error("Failed to fetch public problems:",e)}},[]),q=(0,a.useCallback)(async()=>{if(!c||!d?.id){v(null);return}try{let e=await d.getIdToken(),t=await fetch(`${o}/.netlify/functions/get-or-create-user-profile`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({auth_id:d.id,email:d.email,name:d.name||(d.email?d.email.split("@")[0]:"User")})});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let s=await t.json();v(s)}catch(e){console.error("Failed to fetch or create user profile:",e),v(null)}},[c,d]),E=(0,a.useCallback)(async()=>{if(!c||!p?.id){$([]);return}try{let e=await d.getIdToken(),t=await fetch(`${o}/.netlify/functions/get-my-requests?userId=${p.id}`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let s=await t.json();$(s)}catch(e){console.error("Failed to fetch my requests:",e),$([])}},[c,p?.id,d]),A=(0,a.useCallback)(async()=>{if(!c||!p?.id||p?.role!=="provider"){P([]);return}try{let e=await d.getIdToken(),t=await fetch(`${o}/.netlify/functions/get-my-quotes?providerId=${p.id}`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let s=await t.json();P(s)}catch(e){console.error("Failed to fetch my quotes:",e),P([])}},[c,p?.id,p?.role,d]);(0,a.useEffect)(()=>{(async()=>{k(!0),await Promise.all([S(),T(),z()]),k(!1)})()},[S,T,z]),(0,a.useEffect)(()=>{c&&t?q():(v(null),$([]),P([]))},[c,q,t]),(0,a.useEffect)(()=>{p?.id&&c&&t&&(E(),A())},[p?.id,c,E,A,t]);let Z={branding:x,pricingPlans:b,publicProblems:y,userProfile:p,myRequests:N,myQuotes:C,fetchMyRequests:E,fetchPublicProblems:z,fetchMyQuotes:A,isAuthenticated:c,user:d,isLoading:u||w||!t,login:h,logout:m};return r.jsx(n.Provider,{value:Z,children:e})}},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/home/runner/workspace/app/layout.tsx#default`)},9752:()=>{}};