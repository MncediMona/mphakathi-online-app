(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8036:function(e,t,s){Promise.resolve().then(s.bind(s,4902))},4902:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var n=s(7437),l=s(2265),i=s(7911),a=s(228),r=s(7856);function o(e){let{children:t}=e,s=(0,r.A)();return s?(0,n.jsx)(a.Z,{app:s,children:t}):(0,n.jsx)("div",{children:"Loading authentication..."})}var c=s(7648),u=s(9376),d=s(9637),x=s(8736),m=s(5252),f=s(4286),h=s(8728),g=s(7692),b=s(2369);function v(){let{isAuthenticated:e,userProfile:t,login:s,logout:a,isLoading:r}=l.useContext(i.I),o=(0,u.usePathname)();return r?(0,n.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Mphakathi Online"}),(0,n.jsx)("div",{className:"text-gray-500",children:"Loading navigation..."})]}):(0,n.jsxs)("div",{className:"hidden md:flex items-center space-x-6",children:[(0,n.jsxs)(c.default,{href:"/",className:"text-gray-700 hover:text-blue-600 flex items-center ".concat("/"===o?"text-blue-600 font-semibold":""),children:[(0,n.jsx)(d.Z,{size:20,className:"mr-1"})," Dashboard"]}),e&&(null==t?void 0:t.role)==="member"&&(0,n.jsxs)(c.default,{href:"/my-requests",className:"text-gray-700 hover:text-blue-600 flex items-center ".concat("/my-requests"===o?"text-blue-600 font-semibold":""),children:[(0,n.jsx)(x.Z,{size:20,className:"mr-1"})," My Requests"]}),e&&(null==t?void 0:t.role)==="provider"&&(0,n.jsxs)(c.default,{href:"/my-quotes",className:"text-gray-700 hover:text-blue-600 flex items-center ".concat("/my-quotes"===o?"text-blue-600 font-semibold":""),children:[(0,n.jsx)(m.Z,{size:20,className:"mr-1"})," My Quotes"]}),e&&(null==t?void 0:t.role)==="admin"&&(0,n.jsxs)(c.default,{href:"/admin",className:"text-gray-700 hover:text-blue-600 flex items-center ".concat("/admin"===o?"text-blue-600 font-semibold":""),children:[(0,n.jsx)(f.Z,{size:20,className:"mr-1"})," Admin"]}),e&&(0,n.jsxs)(c.default,{href:"/settings",className:"text-gray-700 hover:text-blue-600 flex items-center ".concat("/settings"===o?"text-blue-600 font-semibold":""),children:[(0,n.jsx)(h.Z,{size:20,className:"mr-1"})," Settings"]}),e?(0,n.jsxs)("button",{onClick:a,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 flex items-center",children:[(0,n.jsx)(g.Z,{size:20,className:"mr-1"})," Logout"]}):(0,n.jsxs)("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[(0,n.jsx)(b.Z,{size:20,className:"mr-1"})," Login"]})]})}function j(e){let{children:t}=e;return(0,n.jsxs)("html",{lang:"en",children:[(0,n.jsxs)("head",{children:[(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,n.jsx)("title",{children:"Mphakathi Online"})]}),(0,n.jsx)("body",{children:(0,n.jsx)(o,{children:(0,n.jsx)(i.w,{children:(0,n.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col",children:[(0,n.jsxs)("nav",{className:"bg-white shadow-md p-4 flex justify-between items-center sticky top-0 z-40",children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Mphakathi Online"})}),(0,n.jsx)(v,{})]}),(0,n.jsx)("main",{className:"flex-grow p-4 md:p-8",children:t})]})})})})]})}s(5660)},7911:function(e,t,s){"use strict";s.d(t,{I:function(){return r},w:function(){return o}});var n=s(7437),l=s(2265),i=s(2394),a=s(7856);let r=(0,l.createContext)(null),o=e=>{let{children:t}=e,s=(0,a.A)(),{isAuthenticated:o,user:c,isLoading:u}=(0,i.a)(),[d,x]=(0,l.useState)(null),[m,f]=(0,l.useState)([]),[h,g]=(0,l.useState)([]),[b,v]=(0,l.useState)(null),[j,y]=(0,l.useState)(!0),[N,p]=(0,l.useState)([]),[k,C]=(0,l.useState)([]),w=(0,l.useCallback)(async()=>{},[]),L=(0,l.useCallback)(async()=>{},[]),_=(0,l.useCallback)(async()=>{},[]),S=(0,l.useCallback)(async()=>{},[o,c]),E=(0,l.useCallback)(async()=>{},[o,null==b?void 0:b.id]),z=(0,l.useCallback)(async()=>{},[o,null==b?void 0:b.id,null==b?void 0:b.role]);(0,l.useEffect)(()=>{(async()=>{y(!0),await Promise.all([w(),L(),_()]),y(!1)})()},[w,L,_]),(0,l.useEffect)(()=>{o?S():(v(null),p([]),C([]))},[o,S]),(0,l.useEffect)(()=>{(null==b?void 0:b.id)&&o&&(E(),z())},[null==b?void 0:b.id,o,E,z]);let A={branding:d,pricingPlans:m,publicProblems:h,userProfile:b,myRequests:N,myQuotes:k,fetchMyRequests:E,fetchPublicProblems:_,fetchMyQuotes:z,isAuthenticated:o,user:c,isLoading:u||j,login:(null==s?void 0:s.login)||(()=>console.log("Login not available")),logout:(null==s?void 0:s.logout)||(()=>console.log("Logout not available"))};return(0,n.jsx)(r.Provider,{value:A,children:t})}},7856:function(e,t,s){"use strict";s.d(t,{A:function(){return i}});var n=s(9831);let l=null;function i(){if(!l){let e="39e32132-4994-4c0c-90db-05150db4054e",t="pck_vzrmv65na39bvj84erejggxshygga2vxrvtkj1n1cfg5g";if(!e||!t)return console.error("Stack Auth environment variables (NEXT_PUBLIC_STACK_PROJECT_ID or NEXT_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY) are not set. Please ensure they are configured in your Netlify Environment Variables AND your local .env file. Skipping StackClientApp initialization on client due to missing keys."),{login:()=>console.log("Login not configured, missing keys."),logout:()=>console.log("Logout not configured, missing keys.")};l=new n.f({projectId:e,publishableClientKey:t})}return l}},5660:function(){}},function(e){e.O(0,[152,906,347,688,971,117,744],function(){return e(e.s=8036)}),_N_E=e.O()}]);